@model IEnumerable<RMS.Model.viewModes.OrderCartDTOs>

@{
    ViewBag.Title = "Index";
}


<div class="container">
    <h2 class="text-center" > Menu Items</h2>
    @foreach(var item in Model) 
    { 
        <div class="col-md-3" style="border: 2px solid black">

                <div style="text-align:center; border-bottom:2px solid maroon">

                    <h3> @item.MenuName</h3>

                </div>
                <div>
                    @if (item.ImagePath != null)
                    {
                        <div class="col-md-8">
                            <img src="~/Content/Image/@item.ImagePath" width="100px" height="100px" />

                        </div>
                    }
                    <div class="col-md-3" style="text-align:left">
                        <b>@item.Description</b>
                    </div>
                </div>
                <div class="col-md-8" style="font-size:18px border-top: 2px solid maroon;padding: 2px">
                    <b> @item.MenuPrice</b>
                </div>
                <div class="col-md-3" style="text-align:right; margin-bottom:10px; border-top:2px solid maroon; padding:2px">
                    <input type=" submit" name="AddToCart" value=" Add To Cart" class="btn btn-primary" menuId="@item.MenuID" id="btnAddToCart" onclick="AddToCart(this)" />

                </div>

            </div>      
               
    }

</div>

<script type="text/javascript">
    function AddToCart(item) {
       var MenuId = $(item).attr("MenuId");
        

        var formData = { "MenuId": $(item).attr("MenuId") };

        $.ajax({
            async: true,
            type: "POST",
            contentType: false,
            processData: false,
            data: formData,
            url: "/OrderCart/Index",
            success: function (data) {
                if (data.success)
                {
                    $("#cartItem").text("Cart(" + data.Counter + ")");
                    ResetItem();

                }

            },
            error: function () {
                alert("Error occured");
            }
        });
    }

</script>
